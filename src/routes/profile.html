<svelte:head>
  <title>Orchard: My profile</title>
</svelte:head>

<h1>My profile</h1>

<RequireAuth>
  {#if !$user}
  <p>Loading user...</p>
  {:else}
  <table>
    <tbody>
      <tr>
        <td>Username</td>
        <td>{$user.username}</td>
      </tr>
      <tr>
        <td>User ID</td>
        <td>{$user._id}</td>
      </tr>
      <tr>
        <td>Created</td>
        <td>{createdDate}</td>
      </tr>
      <tr>
        <td>Updated</td>
        <td>{updatedDate}</td>
      </tr>
    </tbody>
  </table>
  {/if}
</RequireAuth>

<script>
  export default {
    components: {
      RequireAuth: "../components/RequireAuth.html"
    },
    computed: {
      createdDate: ({ $user }) => {
        if ($user) {
          const date = new Date($user.createdAt);
          return date.toDateString();
        }
        return false;
      },
      updatedDate: ({ $user }) => {
        if ($user) {
          const date = new Date($user.updatedAt);
          return date.toDateString();
        }
        return false;
      }
    }
  };
</script>